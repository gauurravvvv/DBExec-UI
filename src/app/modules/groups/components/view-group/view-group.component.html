<div class="view-category-wrapper">
  <div class="view-category-container">
    <!-- Header Section -->
    <div class="page-header">
      <div class="left-section">
        <button pButton class="p-button-text back-button" (click)="goBack()">
          <i class="pi pi-arrow-left"></i>
        </button>
        <h2>Group Details</h2>
      </div>
      <div class="header-actions">
        <button class="btn-primary" (click)="onEdit()">
          <i class="pi pi-pencil"></i> Edit
        </button>
        <button class="btn-danger" type="button" (click)="confirmDelete()">
          <i class="pi pi-trash"></i> Delete
        </button>
      </div>
    </div>

    <!-- Content Section -->
    <div class="content-section" *ngIf="groupData">
      <div class="details-grid">
        <!-- Basic Information -->
        <div class="info-section">
          <h3>
            <i class="pi pi-info-circle mr-2"></i>
            Basic Information
          </h3>
          <div class="info-grid">
            <div class="info-item">
              <label>Name</label>
              <p>{{ groupData.name }}</p>
            </div>
            <div class="info-item">
              <label>Description</label>
              <p>{{ groupData.description || 'No description available' }}</p>
            </div>
            <div class="info-item">
              <label>Status</label>
              <span class="status-badge" [class.active]="groupData.status === 1">
                <i class="pi" [ngClass]="
                    groupData.status === 1
                      ? 'pi-check-circle'
                      : 'pi-times-circle'
                  "></i>
                {{ groupData.status === 1 ? 'Active' : 'Inactive' }}
              </span>
            </div>
            <div class="info-item">
              <label>Organisation</label>
              <p class="with-icon">
                <i class="pi pi-building mr-2"></i>
                {{ groupData.organisationName }}
              </p>
            </div>
            <div class="info-item">
              <label>Created On</label>
              <p class="with-icon">
                <i class="pi pi-calendar mr-2"></i>
                {{ groupData.createdOn | date : 'medium' }}
              </p>
            </div>
          </div>
        </div>

        <!-- Fields Configuration -->
        <div class="info-section">
          <h3>
            <i class="pi pi-users mr-2"></i>
            Users Mapping
            <span class="count-badge">{{ groupData.userGroups.length }}</span>
          </h3>
          <div class="fields-list">
            <div class="field-item" *ngFor="let field of groupData.userGroups">
              <i class="pi pi-user"></i>
              {{ field.user.username }}
            </div>
            <div *ngIf="groupData?.userGroups.length === 0" class="no-data">
              No users found
            </div>
          </div>
        </div>

        <div class="info-section">
          <h3>
            <i class="pi pi-database mr-2"></i>
            Database and Connections
            <span class="count-badge">{{ groupData.connections.length }}</span>
          </h3>
          <div class="fields-list">
            <div class="field-item" *ngFor="let connection of groupData.connections">
              <i class="pi pi-user"></i>
              {{ connection }}
            </div>

            <div *ngIf="groupData?.connections.length === 0" class="no-data">
              No database connection found
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="confirmation-popup" *ngIf="showDeleteConfirm">
  <div class="popup-content">
    <!-- Header -->
    <div class="popup-header">
      <div class="popup-icon">
        <i class="pi pi-trash"></i>
      </div>
      <h3>Confirm Delete</h3>
    </div>

    <!-- Delete Info Section -->
    <div class="standard-delete-section">
      <p class="delete-intro">
        Are you sure you want to delete this group?
      </p>

      <ul class="delete-info-list">
        <li>
          <i class="pi pi-info-circle"></i>
          <span>All users will be removed from this group</span>
        </li>
        <li>
          <i class="pi pi-info-circle"></i>
          <span>Group permissions will be revoked</span>
        </li>
        <li>
          <i class="pi pi-info-circle"></i>
          <span>This action cannot be undone</span>
        </li>
      </ul>
    </div>

    <!-- Actions -->
    <div class="popup-actions">
      <button class="btn-cancel" (click)="cancelDelete()">
        <i class="pi pi-times"></i>
        Cancel
      </button>
      <button class="btn-confirm" (click)="proceedDelete()">
        <i class="pi pi-trash"></i>
        Delete
      </button>
    </div>
  </div>
</div>