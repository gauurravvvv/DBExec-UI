<div class="view-admin-wrapper">
  <div class="view-admin-container">
    <!-- Header Section -->
    <div class="page-header">
      <div class="left-section">
        <button pButton class="p-button-text" routerLink="/app/users">
          <i class="pi pi-arrow-left"></i>
        </button>
        <h2>User Details</h2>
      </div>
      <div class="action-buttons">
        <button pButton class="p-button-outlined" type="button" label="Edit" [disabled]="userId == loggedInUserId"
          [routerLink]="['/app/users/edit', orgId, userId]">
          <i class="pi pi-pencil mr-2"></i>
        </button>
        <button pButton class="p-button-outlined" type="button" label="Change Password"
          (click)="openChangePasswordDialog()">
          <i class="pi pi-key mr-2"></i>
        </button>
        <button pButton class="p-button-outlined p-button-danger" type="button" label="Delete"
          [disabled]="userId == loggedInUserId" (click)="confirmDelete(userId)">
          <i class="pi pi-trash mr-2"></i>
        </button>
      </div>
    </div>

    <!-- Profile Section -->
    <div class="profile-container">
      <div class="details-grid">
        <!-- First Row: Avatar and Personal Info -->
        <div class="first-row">
          <!-- Avatar Section -->
          <div class="avatar-section">
            <div class="avatar-circle" [style.background-color]="avatarBackground">
              {{ userInitials }}
            </div>
            <h3 class="admin-name">
              {{ userData?.firstName }} {{ userData?.lastName }}
            </h3>
            <p class="admin-username">@ {{ userData?.username }}</p>
          </div>

          <!-- Personal Information -->
          <div class="detail-group">
            <h4>Personal Information</h4>
            <div class="detail-item">
              <span class="label">
                <i class="pi pi-user"></i>
                First Name
              </span>
              <span class="value">{{ userData?.firstName }}</span>
            </div>
            <div class="detail-item">
              <span class="label">
                <i class="pi pi-user"></i>
                Last Name
              </span>
              <span class="value">{{ userData?.lastName }}</span>
            </div>
          </div>
        </div>

        <!-- Second Row: Contact and Account Info -->
        <div class="second-row">
          <!-- Contact Information -->
          <div class="detail-group">
            <h4>Contact Information</h4>
            <div class="detail-item">
              <span class="label">
                <i class="pi pi-envelope"></i>
                Email
              </span>
              <span class="value">{{ userData?.email }}</span>
            </div>
            <div class="detail-item">
              <span class="label">
                <i class="pi pi-building"></i>
                Organisation
              </span>
              <span class="value">{{ userData?.organisationName }}</span>
            </div>
          </div>

          <!-- Account Information -->
          <div class="detail-group">
            <h4>Account Information</h4>
            <div class="detail-item">
              <span class="label">
                <i class="pi pi-clock"></i>
                Last Login
              </span>
              <span class="value">{{
                userData?.lastLogin
                ? (userData?.lastLogin | date : 'medium')
                : 'Never logged in'
                }}</span>
            </div>
            <div class="detail-item">
              <span class="label">
                <i class="pi pi-check-circle"></i>
                Status
              </span>
              <span class="value">
                <span class="status-badge" [class.active]="userData?.status === 1">
                  {{ userData?.status === 1 ? 'Active' : 'Inactive' }}
                </span>
              </span>
            </div>
            <div class="detail-item">
              <span class="label">
                <i class="pi pi-calendar"></i>
                Created On
              </span>
              <span class="value">{{
                userData?.createdOn | date : 'medium'
                }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="confirmation-popup" *ngIf="showDeleteConfirm">
  <div class="popup-content">
    <!-- Header -->
    <div class="popup-header">
      <div class="popup-icon">
        <i class="pi pi-trash"></i>
      </div>
      <h3>Confirm Delete</h3>
    </div>

    <!-- Delete Info Section -->
    <div class="standard-delete-section">
      <p class="delete-intro">
        Are you sure you want to delete this user?
      </p>

      <ul class="delete-info-list">
        <li>
          <i class="pi pi-info-circle"></i>
          <span>User access will be revoked</span>
        </li>
        <li>
          <i class="pi pi-info-circle"></i>
          <span>Login credentials will be invalidated</span>
        </li>
        <li>
          <i class="pi pi-info-circle"></i>
          <span>This action cannot be undone</span>
        </li>
      </ul>
    </div>

    <!-- Actions -->
    <div class="popup-actions">
      <button class="btn-cancel" (click)="cancelDelete()">
        <i class="pi pi-times"></i>
        Cancel
      </button>
      <button class="btn-confirm" (click)="proceedDelete()">
        <i class="pi pi-trash"></i>
        Delete
      </button>
    </div>
  </div>
</div>

<app-change-password-dialog [visible]="showChangePasswordDialog" (close)="onPasswordDialogClose($event)">
</app-change-password-dialog>