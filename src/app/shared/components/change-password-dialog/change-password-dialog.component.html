<div class="change-password-popup" *ngIf="visible">
    <div class="popup-content">
        <h3>Change Password</h3>
        <form [formGroup]="passwordForm" class="password-form">
            <!-- New Password -->
            <div class="form-field">
                <label for="newPassword">New Password<span class="required">*</span></label>
                <span class="p-input-icon-left p-input-icon-right">
                    <i class="pi pi-lock"></i>
                    <input id="newPassword" [type]="showNewPassword ? 'text' : 'password'" pInputText
                        formControlName="newPassword" placeholder="Enter new password"
                        [ngClass]="{'ng-invalid ng-dirty': passwordForm.get('newPassword')?.invalid && passwordForm.get('newPassword')?.touched}">
                    <i class="pi pi-eye" style="cursor: pointer;" (click)="togglePassword('new')"></i>
                </span>
                <small class="error-message"
                    *ngIf="passwordForm.get('newPassword')?.invalid && passwordForm.get('newPassword')?.touched">
                    Password must contain at least 8 characters, one uppercase letter, one lowercase letter, one
                    number and one special character
                </small>
            </div>

            <!-- Confirm Password -->
            <div class="form-field">
                <label for="confirmPassword">Confirm Password<span class="required">*</span></label>
                <span class="p-input-icon-left p-input-icon-right">
                    <i class="pi pi-lock"></i>
                    <input id="confirmPassword" [type]="showConfirmPassword ? 'text' : 'password'" pInputText
                        formControlName="confirmPassword" placeholder="Confirm new password"
                        [ngClass]="{'ng-invalid ng-dirty': passwordForm.get('confirmPassword')?.invalid && passwordForm.get('confirmPassword')?.touched}">
                    <i class="pi pi-eye" style="cursor: pointer;" (click)="togglePassword('confirm')"></i>
                </span>
                <small class="error-message"
                    *ngIf="passwordForm.hasError('mismatch') && passwordForm.get('confirmPassword')?.touched">
                    Passwords do not match
                </small>
            </div>

            <div class="popup-actions">
                <button class="btn-cancel" (click)="onCancel()">Cancel</button>
                <button class="btn-confirm" [disabled]="passwordForm.invalid || passwordForm.hasError('mismatch')"
                    (click)="onSubmit()">Update Password</button>
            </div>
        </form>
    </div>
</div>